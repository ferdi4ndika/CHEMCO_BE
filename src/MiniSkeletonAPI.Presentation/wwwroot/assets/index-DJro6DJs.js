import{z as g,r as m,h as R,t as _,j as e,F as z,i as w,k as N,m as y,I as v,n as C,B as f,q as b,g as E,c as p,v as O,w as q}from"./index-GLXjJl2v.js";import{P as H}from"./page-head-LEizjaE-.js";import{a as $,A as K,E as V,T as G,P as W,S as Y,D as J,b as Q,c as X,d as S,e as Z,f as ee,g as se,u as ae}from"./student-create-form-DZCsRXD7.js";import{c as re,D as le,h as ne,i as te,j as oe,m as h,w as ce}from"./index-BC0orV5Y.js";import"./index-C1J0RZ2L.js";/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=re("Slash",[["path",{d:"M22 2 2 22",key:"y4kqgn"}]]);var k;const de=(k=b())==null?void 0:k.apiUrl,me=g.object({image:g.instanceof(FileList).optional(),code:g.string().min(1,{message:"Code is required"})}),pe=({modalClose:s,data:a})=>{const[r,n]=m.useState(!1),t=R({resolver:_(me)}),o=async l=>{n(!0);const c=new FormData;l.image&&l.image.length>0&&c.append("Name",l.image[0]),c.append("Code",l.code),c.append("Id",a.id);try{const i=await $.put(`${de}/Image/${a.id}`,c,{headers:{"Content-Type":"multipart/form-data"}});i.status===200||i.status===204?(console.log("Image updated successfully"),s(),window.location.reload()):console.error("Failed to update image")}catch(i){console.error("Error updating image:",i)}finally{n(!1)}};return e.jsx("div",{className:"px-1",children:e.jsx(z,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(o),className:"space-y-2",autoComplete:"off",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-x-6 gap-y-4",children:[e.jsx(w,{control:t.control,name:"image",render:({field:l})=>e.jsxs(N,{children:[e.jsx(y,{children:e.jsx(v,{type:"file",onChange:c=>l.onChange(c.target.files),className:"px-4 py-6 shadow-inner drop-shadow-xl"})}),e.jsx(C,{})]})}),e.jsx(w,{control:t.control,name:"code",render:({field:l})=>e.jsxs(N,{children:[e.jsx(y,{children:e.jsx(v,{type:"text",placeholder:"Enter code",...l,className:"px-4 py-2 shadow-inner drop-shadow-xl"})}),e.jsx(C,{})]})})]}),e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsx(f,{type:"button",variant:"secondary",className:"rounded-full",size:"lg",onClick:s,disabled:r,children:"Cancel"}),e.jsx(f,{type:"submit",className:"rounded-full",size:"lg",disabled:r,children:r?"Updating...":"Update"})]})]})})})};var F;const xe=(F=b())==null?void 0:F.apiUrl,I=$.create({baseURL:xe,timeout:5e3,headers:{"Content-Type":"application/json"}}),he=({data:s})=>{const[a,r]=m.useState(!1),[n,t]=m.useState(!1),[o,l]=m.useState(!1),c=E(),i=async()=>{r(!0);try{await I.delete(`/Image/${s.id}`),r(!1),t(!1),c.reload()}catch(x){r(!1),console.error("Error deleting data:",x)}},u=async()=>{I.post("/MqttPublish",{code:s.code}).then(x=>{console.log("Image shown:",x.data)}).catch(x=>{console.error("Error showing image:",x)})},P=()=>{l(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(K,{isOpen:n,onClose:()=>t(!1),onConfirm:i,loading:a}),e.jsxs(le,{modal:!1,children:[e.jsx(ne,{asChild:!0,children:e.jsxs(f,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(V,{className:"h-4 w-4"})]})}),e.jsxs(te,{align:"end",children:[e.jsx(oe,{children:"Actions"}),e.jsx(h,{onClick:()=>c.push(`/web_eid/${s.image}`),children:"View Image"}),e.jsx(h,{onClick:u,children:"Show Image"}),e.jsx(h,{onClick:P,children:"Update"}),e.jsx(h,{onClick:()=>t(!0),children:"Delete"})]})]}),o&&e.jsx(pe,{modalClose:()=>l(!1),data:{id:s.id,imageUrl:s.image}})]})};var B;const j=(B=b())==null?void 0:B.imageBaseUrl,ue=[{accessorKey:"name",header:"Video",cell:({getValue:s})=>{const a=s();if(console.log(a),!a)return e.jsx("span",{children:"No media available"});const r=/\.(jpg|jpeg|png|gif)$/i.test(a),n=/\.(mp4|webm|ogg)$/i.test(a);return e.jsxs(e.Fragment,{children:[r&&e.jsx("img",{src:`${j}/${a}`,alt:"Media",style:{width:"200px",height:"100px"}}),n&&e.jsx("video",{src:`${j}/${a}`,autoPlay:!0,muted:!0,loop:!0,style:{width:"200px",height:"100px"},children:"Your browser does not support the video tag."},`${j}/${a}`),!r&&!n&&e.jsx("span",{children:"Unsupported media type"})]})}},{accessorKey:"name",header:"Name"},{accessorKey:"code",header:"Code"},{id:"actions",cell:({row:s})=>e.jsx(he,{data:s.original})}];function ge(){return e.jsxs("div",{className:"flex items-center justify-between gap-2 py-5",children:[e.jsx("div",{className:"flex flex-1 gap-4",children:e.jsx(G,{placeholder:"Search People Here"})}),e.jsx("div",{className:"flex gap-3",children:e.jsx(W,{renderModal:s=>e.jsx(Y,{modalClose:s})})})]})}function je({users:s,pageCount:a}){return e.jsxs(e.Fragment,{children:[e.jsx(ge,{}),s&&e.jsx(J,{columns:ue,data:s,pageCount:a})]})}function d({className:s,...a}){return e.jsx("div",{className:p("animate-pulse rounded-md bg-primary/10",s),...a})}function fe({columnCount:s,rowCount:a=10,searchableColumnCount:r=0,filterableColumnCount:n=0,showViewOptions:t=!0}){return e.jsxs("div",{className:"w-full space-y-3 overflow-auto",children:[e.jsxs("div",{className:"flex w-full items-center justify-between space-x-2 overflow-auto p-1",children:[e.jsxs("div",{className:"flex flex-1 items-center space-x-2 space-y-4",children:[r>0?Array.from({length:r}).map((o,l)=>e.jsx(d,{className:"h-10 w-[150px] lg:w-[250px]"},l)):null,n>0?Array.from({length:n}).map((o,l)=>e.jsx(d,{className:"h-10 w-[70px] border-dashed"},l)):null]}),t?e.jsx(d,{className:"ml-auto hidden h-7 w-[70px] lg:flex"}):null]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(Q,{children:[e.jsx(X,{children:Array.from({length:1}).map((o,l)=>e.jsx(S,{className:"hover:bg-transparent",children:Array.from({length:s}).map((c,i)=>e.jsx(Z,{children:e.jsx(d,{className:"h-6 w-full"})},i))},l))}),e.jsx(ee,{children:Array.from({length:a}).map((o,l)=>e.jsx(S,{className:"hover:bg-transparent",children:Array.from({length:s}).map((c,i)=>e.jsx(se,{children:e.jsx(d,{className:"h-6 w-full"})},i))},l))})]})}),e.jsxs("div",{className:"flex w-full flex-col items-center justify-between gap-4 overflow-auto px-2 py-1 sm:flex-row sm:gap-8",children:[e.jsx("div",{className:"flex-1",children:e.jsx(d,{className:"h-8 w-40"})}),e.jsxs("div",{className:"flex flex-col items-center gap-4 sm:flex-row sm:gap-6 lg:gap-8",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(d,{className:"h-8 w-24"}),e.jsx(d,{className:"h-8 w-[70px]"})]}),e.jsx("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:e.jsx(d,{className:"h-8 w-20"})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(d,{className:"hidden size-8 lg:block"}),e.jsx(d,{className:"size-8"}),e.jsx(d,{className:"size-8"}),e.jsx(d,{className:"hidden size-8 lg:block"})]})]})]})]})}const M=m.forwardRef(({...s},a)=>e.jsx("nav",{ref:a,"aria-label":"breadcrumb",...s}));M.displayName="Breadcrumb";const U=m.forwardRef(({className:s,...a},r)=>e.jsx("ol",{ref:r,className:p("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",s),...a}));U.displayName="BreadcrumbList";const T=m.forwardRef(({className:s,...a},r)=>e.jsx("li",{ref:r,className:p("inline-flex items-center gap-1.5",s),...a}));T.displayName="BreadcrumbItem";const D=m.forwardRef(({asChild:s,className:a,...r},n)=>{const t=s?O:"a";return e.jsx(t,{ref:n,className:p("transition-colors hover:text-foreground",a),...r})});D.displayName="BreadcrumbLink";const A=m.forwardRef(({className:s,...a},r)=>e.jsx("span",{ref:r,role:"link","aria-disabled":"true","aria-current":"page",className:p("font-normal text-foreground",s),...a}));A.displayName="BreadcrumbPage";const L=({children:s,className:a,...r})=>e.jsx("li",{role:"presentation","aria-hidden":"true",className:p("[&>svg]:size-3.5",a),...r,children:s??e.jsx(ce,{})});L.displayName="BreadcrumbSeparator";function be({items:s}){return e.jsx(M,{children:e.jsx(U,{children:s.map((a,r)=>e.jsxs(m.Fragment,{children:[r!==s.length-1&&e.jsx(T,{children:e.jsx(D,{href:a.link,children:a.title})}),r<s.length-1&&e.jsx(L,{children:e.jsx(ie,{})}),r===s.length-1&&e.jsx(A,{children:a.title})]},a.title))})})}function Se(){const[s]=q(),a=Number(s.get("page")||1),r=Number(s.get("limit")||10),n=s.get("search")||null,t=(a-1)*r,{data:o,isLoading:l}=ae(t,r,n),c=o==null?void 0:o.data,i=o==null?void 0:o.total_users,u=Math.ceil(i/r);return l?e.jsx("div",{className:"p-5",children:e.jsx(fe,{columnCount:10,filterableColumnCount:2,searchableColumnCount:1})}):e.jsxs("div",{className:"p-4 md:p-8",children:[e.jsx(H,{title:"Management Image | App"}),e.jsx(be,{items:[{title:"Dashboard",link:"/"},{title:"Web_image",link:"/image"}]}),e.jsx(je,{users:c,page:a,totalUsers:i,pageCount:u})]})}export{Se as default};
