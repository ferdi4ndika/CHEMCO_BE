import{q as b,r as d,g as k,j as e,B as I,c as m,v as T,w as $}from"./index-wSPl4KLy.js";import{P as M}from"./page-head-DJFyRWHR.js";import{a as A,A as P,E as D,T as L,P as R,S as _,D as U,b as E,c as z,d as u,e as F,f as H,g as q,u as K}from"./student-create-form-p_atTReQ.js";import{c as O,D as V,h as G,i as W,j as Y,m as h,w as J}from"./index-CtTbrhL1.js";import"./index-BC6eIevB.js";/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=O("Slash",[["path",{d:"M22 2 2 22",key:"y4kqgn"}]]);var j;const X=(j=b())==null?void 0:j.apiUrl,g=A.create({baseURL:X,timeout:5e3,headers:{"Content-Type":"application/json"}}),Z=({data:s})=>{const[a,r]=d.useState(!1),[c,i]=d.useState(!1),l=k(),o=async()=>{r(!0);try{await g.delete(`/Image/${s.id}`),r(!1),i(!1),l.reload()}catch(n){r(!1),console.error("Error deleting data:",n)}},x=async()=>{g.post("/MqttPublish/publish",{code:s.code}).then(n=>{console.log("Image shown:",n.data)}).catch(n=>{console.error("Error showing image:",n)})};return e.jsxs(e.Fragment,{children:[e.jsx(P,{isOpen:c,onClose:()=>i(!1),onConfirm:o,loading:a}),e.jsxs(V,{modal:!1,children:[e.jsx(G,{asChild:!0,children:e.jsxs(I,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(D,{className:"h-4 w-4"})]})}),e.jsxs(W,{align:"end",children:[e.jsx(Y,{children:"Actions"}),e.jsx(h,{onClick:()=>l.push(`/web_eid/${s.image}`),children:"View Image"}),e.jsx(h,{onClick:x,children:"Show Image"}),e.jsx(h,{onClick:()=>i(!0),children:"Delete"})]})]})]})};var f;const p=(f=b())==null?void 0:f.imageBaseUrl,ee=[{accessorKey:"image",header:"Video",cell:({getValue:s})=>{const a=s();if(console.log(a),!a)return e.jsx("span",{children:"No media available"});const r=/\.(jpg|jpeg|png|gif)$/i.test(a),c=/\.(mp4|webm|ogg)$/i.test(a);return e.jsxs(e.Fragment,{children:[r&&e.jsx("img",{src:`${p}/${a}`,alt:"Media",style:{width:"200px",height:"100px"}}),c&&e.jsx("video",{src:`${p}/${a}`,autoPlay:!0,muted:!0,loop:!0,style:{width:"200px",height:"100px"},children:"Your browser does not support the video tag."},`${p}/${a}`),!r&&!c&&e.jsx("span",{children:"Unsupported media type"})]})}},{accessorKey:"image",header:"Name"},{accessorKey:"code",header:"Code"},{id:"actions",cell:({row:s})=>e.jsx(Z,{data:s.original})}];function se(){return e.jsxs("div",{className:"flex items-center justify-between gap-2 py-5",children:[e.jsx("div",{className:"flex flex-1 gap-4",children:e.jsx(L,{placeholder:"Search People Here"})}),e.jsx("div",{className:"flex gap-3",children:e.jsx(R,{renderModal:s=>e.jsx(_,{modalClose:s})})})]})}function ae({users:s,pageCount:a}){return e.jsxs(e.Fragment,{children:[e.jsx(se,{}),s&&e.jsx(U,{columns:ee,data:s,pageCount:a})]})}function t({className:s,...a}){return e.jsx("div",{className:m("animate-pulse rounded-md bg-primary/10",s),...a})}function re({columnCount:s,rowCount:a=10,searchableColumnCount:r=0,filterableColumnCount:c=0,showViewOptions:i=!0}){return e.jsxs("div",{className:"w-full space-y-3 overflow-auto",children:[e.jsxs("div",{className:"flex w-full items-center justify-between space-x-2 overflow-auto p-1",children:[e.jsxs("div",{className:"flex flex-1 items-center space-x-2 space-y-4",children:[r>0?Array.from({length:r}).map((l,o)=>e.jsx(t,{className:"h-10 w-[150px] lg:w-[250px]"},o)):null,c>0?Array.from({length:c}).map((l,o)=>e.jsx(t,{className:"h-10 w-[70px] border-dashed"},o)):null]}),i?e.jsx(t,{className:"ml-auto hidden h-7 w-[70px] lg:flex"}):null]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(E,{children:[e.jsx(z,{children:Array.from({length:1}).map((l,o)=>e.jsx(u,{className:"hover:bg-transparent",children:Array.from({length:s}).map((x,n)=>e.jsx(F,{children:e.jsx(t,{className:"h-6 w-full"})},n))},o))}),e.jsx(H,{children:Array.from({length:a}).map((l,o)=>e.jsx(u,{className:"hover:bg-transparent",children:Array.from({length:s}).map((x,n)=>e.jsx(q,{children:e.jsx(t,{className:"h-6 w-full"})},n))},o))})]})}),e.jsxs("div",{className:"flex w-full flex-col items-center justify-between gap-4 overflow-auto px-2 py-1 sm:flex-row sm:gap-8",children:[e.jsx("div",{className:"flex-1",children:e.jsx(t,{className:"h-8 w-40"})}),e.jsxs("div",{className:"flex flex-col items-center gap-4 sm:flex-row sm:gap-6 lg:gap-8",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(t,{className:"h-8 w-24"}),e.jsx(t,{className:"h-8 w-[70px]"})]}),e.jsx("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:e.jsx(t,{className:"h-8 w-20"})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(t,{className:"hidden size-8 lg:block"}),e.jsx(t,{className:"size-8"}),e.jsx(t,{className:"size-8"}),e.jsx(t,{className:"hidden size-8 lg:block"})]})]})]})]})}const w=d.forwardRef(({...s},a)=>e.jsx("nav",{ref:a,"aria-label":"breadcrumb",...s}));w.displayName="Breadcrumb";const N=d.forwardRef(({className:s,...a},r)=>e.jsx("ol",{ref:r,className:m("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",s),...a}));N.displayName="BreadcrumbList";const y=d.forwardRef(({className:s,...a},r)=>e.jsx("li",{ref:r,className:m("inline-flex items-center gap-1.5",s),...a}));y.displayName="BreadcrumbItem";const v=d.forwardRef(({asChild:s,className:a,...r},c)=>{const i=s?T:"a";return e.jsx(i,{ref:c,className:m("transition-colors hover:text-foreground",a),...r})});v.displayName="BreadcrumbLink";const S=d.forwardRef(({className:s,...a},r)=>e.jsx("span",{ref:r,role:"link","aria-disabled":"true","aria-current":"page",className:m("font-normal text-foreground",s),...a}));S.displayName="BreadcrumbPage";const B=({children:s,className:a,...r})=>e.jsx("li",{role:"presentation","aria-hidden":"true",className:m("[&>svg]:size-3.5",a),...r,children:s??e.jsx(J,{})});B.displayName="BreadcrumbSeparator";function le({items:s}){return e.jsx(w,{children:e.jsx(N,{children:s.map((a,r)=>e.jsxs(d.Fragment,{children:[r!==s.length-1&&e.jsx(y,{children:e.jsx(v,{href:a.link,children:a.title})}),r<s.length-1&&e.jsx(B,{children:e.jsx(Q,{})}),r===s.length-1&&e.jsx(S,{children:a.title})]},a.title))})})}function de(){const[s]=$(),a=Number(s.get("page")||1),r=Number(s.get("limit")||10),c=s.get("search")||null,i=(a-1)*r,{data:l,isLoading:o}=K(i,r,c),x=l==null?void 0:l.data,n=l==null?void 0:l.total_users,C=Math.ceil(n/r);return o?e.jsx("div",{className:"p-5",children:e.jsx(re,{columnCount:10,filterableColumnCount:2,searchableColumnCount:1})}):e.jsxs("div",{className:"p-4 md:p-8",children:[e.jsx(M,{title:"Management Image | App"}),e.jsx(le,{items:[{title:"Dashboard",link:"/"},{title:"Web_image",link:"/image"}]}),e.jsx(ae,{users:x,page:a,totalUsers:n,pageCount:C})]})}export{de as default};
